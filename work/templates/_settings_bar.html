{% load firstof from future %}
{% load account_tags %}
{% load i18n %}
<ul class="nav pull-right">
    {% if request.user.is_authenticated %}
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                {% user_display request.user %}
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                {% if user.is_staff or user.is_superuser %}
                    <li><a href="{% url "start" %}"><i class="icon-tasks"></i> {% trans 'Coop Node App' %}</a></li>
                {% endif %}
                <li class="divider"></li>
                <li><a href="{% url "account_logout" %}?next={% firstof request.path '/' %}"><i class="icon-off"></i> {% trans 'Log Out' %}</a></li>
            </ul>
        </li>
    {% else %}
        <li>
            {% if request.path = '/' %}
                <a href="{% url "account_login" %}">
            {% else %}
                <a href="{% url "account_login" %}?next={% firstof request.path '/' %}">
            {% endif %}
            Log in</a>
        </li>
        {% if ACCOUNT_OPEN_SIGNUP %}
            <li class="navbar-text">{% trans 'or' %}</li>
            <li><a href="{% url "account_signup" %}">{% trans 'Sign up' %}</a></li>
        {% endif %}
    {% endif %}
</ul>
